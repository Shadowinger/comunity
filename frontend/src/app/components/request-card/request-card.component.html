<a class="card block hover:bg-discord-hover transition-all duration-200 group" [routerLink]="['/request', request.id]">
	<div class="flex items-start gap-3">
		<!-- Category Icon -->
		<div class="w-10 h-10 rounded-lg bg-discord-channel flex items-center justify-center text-discord-muted group-hover:bg-discord-blurple group-hover:text-white transition-colors">
			<ng-container [ngSwitch]="request.category">
				<svg *ngSwitchCase="'moving'" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
					<path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
				</svg>
				<svg *ngSwitchCase="'tutoring'" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
					<path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
				</svg>
				<svg *ngSwitchCase="'repair'" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
					<path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
				</svg>
				<svg *ngSwitchDefault class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
					<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
				</svg>
			</ng-container>
		</div>

		<div class="flex-1 min-w-0">
			<div class="flex items-center gap-2 mb-1">
				<h3 class="text-base font-semibold text-white truncate">{{ request.title }}</h3>
				<span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"
					  [ngClass]="{
						'bg-discord-green/20 text-discord-green': request.status === 'open',
						'bg-discord-yellow/20 text-discord-yellow': request.status === 'in_progress',
						'bg-discord-muted/20 text-discord-muted': request.status === 'closed'
					  }">
					{{ request.status === 'open' ? 'Otevřeno' : request.status === 'in_progress' ? 'Probíhá' : 'Uzavřeno' }}
				</span>
			</div>
			<p class="text-sm text-discord-muted line-clamp-2 mb-2">{{ request.description }}</p>
			
			<div class="flex items-center gap-4 text-xs text-discord-muted">
				<span class="flex items-center gap-1">
					<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24">
						<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
					</svg>
					{{ request.user_name || 'Anonym' }}
				</span>
				<span class="uppercase tracking-wide">{{ request.category }}</span>
			</div>
		</div>

		<!-- Reactions -->
		<div class="flex flex-col items-center gap-1">
			<button 
				class="flex flex-col items-center p-2 rounded hover:bg-discord-dark transition-colors"
				(click)="onReact($event)">
				<svg class="w-5 h-5 text-discord-muted hover:text-discord-blurple" fill="currentColor" viewBox="0 0 24 24">
					<path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/>
				</svg>
				<span class="text-xs font-medium text-discord-muted">{{ request.reaction_count || 0 }}</span>
			</button>
		</div>
	</div>
</a>

